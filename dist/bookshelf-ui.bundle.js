webpackJsonp([0],{"./src/index.js":function(o,e,r){"use strict";r("./src/styles/main.scss"),r("./src/scripts/zoobooks.js");var t=r("./src/scripts/googleApisBookLookup.service.js"),n=r("./src/scripts/addBookToLibrary.service.js"),s=(r("./src/scripts/dom.service.js"),r("./src/scripts/loader.service.js")),i=r("./src/scripts/alert.service.js");r("./src/scripts/main.js");var a=!0,c=!1,l=void 0;try{for(var u,d=zoobooks().categories()[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var k=u.value,m=document.createElement("OPTION");m.value=k,m.innerHTML=k,zoobooks().elements().forms.addBook.bookCategory.appendChild(m)}}catch(o){c=!0,l=o}finally{try{!a&&d.return&&d.return()}finally{if(c)throw l}}zoobooks().elements().forms.addBook.ctrls.nextBook.addEventListener("click",function(){var o=zoobooks().bookSearchAPI().currentBook;(0,t.showBookInView)(o+1)}),zoobooks().elements().forms.addBook.ctrls.previousBook.addEventListener("click",function(){var o=zoobooks().bookSearchAPI().currentBook;(0,t.showBookInView)(o-1)}),zoobooks().elements().forms.addBook.ctrls.findBookByISBN.addEventListener("click",function(o){var e=zoobooks().elements().forms.addBook.bookISBN.value.replace(/\-/g,""),r=zoobooks().elements().forms.addBook.bookTitle.value,n=zoobooks().elements().forms.addBook.bookAuthors.value;if(!e&&!r)return(0,i.alertService)().raise({key:"ISBN_OR_TITLE_REQUIRED"});(0,s.loader)().setLoading(),(0,t.findBookByISBN)(e,r,n).then(function(o){var a=JSON.parse(o);if(a.error||0==a.totalItems)(0,i.alertService)().raise({key:"BOOK_SEARCH_ERROR"}),(0,s.loader)().setLoaded();else{zoobooks().bookSearchAPI__SET({query:{isbn:e,title:r,author:n},results:a,currentBook:0}),zoobooks().importData__SET(c),console.log("zoobooks().bookSearchAPI()",zoobooks().bookSearchAPI()),console.log("zoobooks().importData()",zoobooks().importData());var c=zoobooks().bookSearchAPI().results.items[zoobooks().bookSearchAPI().currentBook];(0,t.updateGoogleApisBookInDOM)(c),(0,i.alertService)().raise({key:"BOOK_SEARCH_SUCCESS"}),(0,s.loader)().setLoaded()}},function(o){console.log(o)})}),zoobooks().elements().forms.addBook.ctrls.addBookToLibrary.addEventListener("click",function(){var o=zoobooks().bookSearchAPI().results.length<1?null:zoobooks().bookSearchAPI().results.items[zoobooks().bookSearchAPI().currentBook];o?(0,n.addBookToLibrary)(o):alert("NO_DATA")})},"./src/scripts/addBookToLibrary.service.js":function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.addBookToLibrary=function(o){alert("TODO!\nADD "+o.volumeInfo.title+" TO LIBRARY")}},"./src/scripts/alert.service.js":function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.alertService=function(){return function(){return{raise:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"GENERIC_ERROR",msg:""};console.warn("ALERT => "+o.key)}}}}()},"./src/scripts/dom.service.js":function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.buttonHiddenStateToggle=function(o){o.classList.toggle("hidden")}},"./src/scripts/googleApisBookLookup.service.js":function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showBookInView=e.updateGoogleApisBookInDOM=e.findBookByISBN=void 0;var t=r("./src/scripts/http.service.js"),n=r("./src/scripts/alert.service.js"),s=(e.findBookByISBN=function(o,e,r){var n="https://www.googleapis.com/books/v1/volumes?q=isbn:"+o+"&maxResults=40",s="https://www.googleapis.com/books/v1/volumes?q="+e+" "+r+"&maxResults=40";return new Promise(function(r,i){(0,t.$http)("GET",n).then(function(n){var i=JSON.parse(n);!o||0==i.totalItems&&e?(0,t.$http)("GET",s).then(function(o){r(o)},function(o){console.log(o)}):r(n)},function(o){i(o),console.log(o)})})},e.updateGoogleApisBookInDOM=function(o){var e=[o.volumeInfo.author||o.volumeInfo.authors||"N/A"],r=e.toString(),t=null;if(o.volumeInfo.categories)for(var n in zoobooks().categoriesMap())if(o.volumeInfo.categories[0].match(new RegExp(n,"i"))){t=zoobooks().categoriesMap()[n];break}var s="";o.volumeInfo.imageLinks&&o.volumeInfo.imageLinks.thumbnail&&(s=o.volumeInfo.imageLinks.thumbnail),zoobooks().elements().forms.addBook.bookThumbnail.style.backgroundImage='url("'+s+'")',o.volumeInfo.industryIdentifiers&&(zoobooks().elements().forms.addBook.bookISBN.value=o.volumeInfo.industryIdentifiers[0].identifier),zoobooks().elements().forms.addBook.bookTitle.value=o.volumeInfo.title,zoobooks().elements().forms.addBook.bookAuthors.value=r,zoobooks().elements().forms.addBook.bookCategory.value=t||"Other",zoobooks().elements().forms.addBook.ctrls.totalItems.innerHTML=zoobooks().bookSearchAPI().currentBook+1+" of "+zoobooks().bookSearchAPI().results.items.length});e.showBookInView=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=zoobooks().bookSearchAPI();if(!e.results.items||o<0||o>=e.results.items.length)return(0,n.alertService)().raise({key:"OUT_OF_RANGE_ERROR"});e.currentBook=o,zoobooks().bookSearchAPI__SET(e);var r=zoobooks().bookSearchAPI().results.items[o];s(r)}},"./src/scripts/http.service.js":function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.$http=function(o,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return new Promise(function(n,s){var i=new XMLHttpRequest;i.onerror=function(o){var e=["ERR_CONNECTION_REFUSED","ERR_NAME_NOT_RESOLVED","ERR_BLOCKED_BY_CLIENT","ERR_TUNNEL_CONNECTION_FAILED"],r="The connection failed with one of the following errors: "+e.join("|");s({error:{info:r},info:"Could not determine the type of error. Please check the data property of this object for a list of possible errors",data:e})},i.open(o,e);var a=!0,c=!1,l=void 0;try{for(var u,d=t[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var k=u.value,m=k[0],b=k[1];i.setRequestHeader(m,b)}}catch(o){c=!0,l=o}finally{try{!a&&d.return&&d.return()}finally{if(c)throw l}}i.send(r),i.onload=function(){n(i.responseText)}})}},"./src/scripts/loader.service.js":function(o,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.loader=function(){return function(){return{setLoading:function(){zoobooks().elements().loader.removeAttribute("hidden")},setLoaded:function(){zoobooks().elements().loader.setAttribute("hidden","hidden")}}}}()},"./src/scripts/main.js":function(o,e,r){"use strict";var t=r("./src/scripts/loader.service.js");if(location.search.match(/dev\=1/)){var n=document.querySelectorAll("[developeronly]"),s=!0,i=!1,a=void 0;try{for(var c,l=n[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){c.value.removeAttribute("developeronly")}}catch(o){i=!0,a=o}finally{try{!s&&l.return&&l.return()}finally{if(i)throw a}}}var u={getBooks:"https://zoobooks-api.herokuapp.com/",addBook:"https://zoobooks-api.herokuapp.com/add_book/",deleteBook:"https://zoobooks-api.herokuapp.com/delete_book/"};(0,t.loader)().setLoading();var d=new XMLHttpRequest;d.open("GET",u.getBooks),d.send(),d.onload=function(){var o=JSON.parse(d.responseText);console.log(o);var e=!0,r=!1,n=void 0;try{for(var s,i=o[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var a=s.value;for(var c in a)a[c]=a[c]||"N/A";k(a)}}catch(o){r=!0,n=o}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}(0,t.loader)().setLoaded()};var k=function(o){var e=document.querySelector("books"),r=document.getElementById("bookTemplate"),t=r.cloneNode(!0),n=t.querySelector("[isbn]"),s=t.querySelector("[title]"),i=t.querySelector("[authors]"),a=t.querySelector("[category]"),c=t.querySelector("[thumbnailanchor]"),l=t.querySelector("[thumbnail]"),u=t.querySelector("[description]");t.removeAttribute("template"),c.setAttribute("href",o.previewLink),"N/A"!==o.google_thumbnail&&(l.style.backgroundImage='url("'+o.google_thumbnail+'")'),s.innerHTML=o.title,n.innerHTML=o.isbn,i.innerHTML=o.authors.map(function(o){return o.name}).join(", "),a.innerHTML=o.category,o.description?(u.value=o.description,u.rows=o.description.length<200?"1":o.description.length<400?"2":o.description.length<600?"3":"6"):u.hidden=!0,e.appendChild(t)}},"./src/scripts/zoobooks.js":function(o,e,r){"use strict";var t=function(){var o={},e=["Communication","Agile & Tech","Customer Centricity","Leadership & Culture","Start-up & Entrepreneurial","Work & Wellbeing","Other"],r={communication:"Communication",agile:"Agile & Tech",tech:"Agile & Tech",computers:"Agile & Tech",customer:"Customer Centricity",leadership:"Leadership & Culture",culture:"Leadership & Culture",startup:"Start-up & Entrepreneurial","start-up":"Start-up & Entrepreneurial",entrepreneur:"Start-up & Entrepreneurial",work:"Work & Wellbeing",wellbeing:"Work & Wellbeing",other:"Other",fiction:"Other"},t={query:{isbn:"",title:"",author:""},results:[]};return function(){return{categories:function(){return e},categoriesMap:function(){return r},bookSearchAPI__SET:function(o){for(var e in o)t[e]=o[e]},bookSearchAPI:function(){return t},importData:function(){return o},importData__SET:function(e){o=e},elements:function(){return{loader:document.getElementById("loader"),forms:{addBook:{form:document.getElementById("form__addBook"),bookISBN:document.querySelector("[form__add-book__book-isbn]"),bookTitle:document.querySelector("[form__add-book__book-title]"),bookAuthors:document.querySelector("[form__add-book__book-authors]"),bookThumbnail:document.querySelector("[form__add-book__book-thumbnail]"),bookCategory:document.querySelector("[form__add-book__book-category]"),ctrls:{findBookByISBN:document.getElementById("ctrl__findBookByISBN"),addBookToLibrary:document.getElementById("ctrl__addBookToLibrary"),totalItems:document.querySelector("[form__add-book__ctrls__total-items]"),nextBook:document.querySelector("[form__add-book__ctrls__next-book]"),previousBook:document.querySelector("[form__add-book__ctrls__previous-book]")}}}}}}}}();window.zoobooks=t},"./src/styles/main.scss":function(o,e){},0:function(o,e,r){o.exports=r("./src/index.js")}},[0]);